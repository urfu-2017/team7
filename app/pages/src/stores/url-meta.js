import { observable } from 'mobx';
import { getUrlMeta, onUrlMeta } from '../../../sockets/client';


class UrlMetaStore {
    @observable metaByUrl = observable.map();

    // eslint-disable-next-line class-methods-use-this
    fetchUrlMeta(url) {
        getUrlMeta(url);
    }

    constructor() {
        onUrlMeta(({ url, ...meta }) => {
            if (Object.keys(meta).length) {
                this.metaByUrl.set(url, meta);
            }
        });
    }
}

export default new UrlMetaStore();
